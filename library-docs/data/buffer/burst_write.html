<style>
a
{
  text-decoration : none;
}

a:hover
{
  text-decoration : underline;
}

.container
{
  display        : flex;
  flex-direction : row;
}

.nav
{
  position         : -webkit-sticky;
  position         : sticky;
  flex-basis       : 10%;
  background-color : #f2f3f4;
  padding          : 20px 20px 20px 20px;
  top              : 10vh;
  height           : max-content;
  max-height       : 80vh;
  overflow-y       : auto;
  min-width        : max-content;
  margin           : 3em 3em 3em 3em;
}

.content
{
  flex-basis : 80%;
  max-width  : 1450px;
  margin     : 3em auto 3em auto;
}

.signature
{
  font-family      : monospace;
  background-color : #f2f3f4;
  color            : #373d3f;
  border           : 1px solid #dddddd;
  border-left      : 3px solid #0080ff;
  border-radius    : 5px 5px 5px 5px;
  margin-bottom    : 0.5em;
  padding          : 0.5em 1em 0.5em 1em;
}

.body
{
  font-family : "", sans-serif;
  font-size   : 1em;
  padding     : 10px 10px 10px 10px;
  color       : #1c1b24;
  line-height : 1.4;
}

.docs
{
  padding-left  : 1em;
  margin-top    : -0.4em;
  margin-bottom : 1.4em;
  border-left   : 1px solid #dcdcdc;
}

.docs details
{
  margin-top : 1em;
}

h1, h2, h3, h4
{
  font-family : "", sans-serif;
  color       : #283665;
}

.kanagawa
{
  background-color : #f7f7f7;
  padding          : 1em 1em 1em 1em;
}

.anchor
{
  color : #c5c8c6;
}

.source_link
{
  color : #c5c8c6;
  float : right;
}

.attribute
{
  color : #ffa500;
}

.builtin
{
  color : #cfb017;
}

.identifier
{
  font-weight : bold;
}

.keyword
{
  color : #60ac39;
}

.link
{
  color : #6684e1;
}

.literal
{
  color : #d73737;
}

.modifier
{
  color : #b854d4;
}

.subList
{
  list-style-type : none;
}

code
{
  font-family : monospace;
  font-size   : 1.2em;
}

.nav ul
{
  list-style-type : none;
}

.nav > ul
{
  padding-left : 0px;
}


/* Generated with Clay, http://fvisser.nl/clay */</style>
<div id="body" class="body">
<div id="container" class="container">
<section id="nav" class="nav">
<h2>Index</h2>
<ul>
<li><a href="../../data/buffer/burst_write.html" id="index-link"
class="link">data.buffer.burst_write</a>
<ul>
<li><a
href="../../data/buffer/burst_write.html#data-buffer-burst_write-burst_write_buffer"
id="index-link" class="link"><code>burst_write_buffer</code></a></li>
</ul></li>
</ul>
</section>
<section id="content" class="content">
<h1>data.buffer.burst_write <a href="../../index.html">&equiv;</a></h1>
<hr />
<pre class="signature">
<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">auto</span> BufferSize, <span class="keyword">auto</span> BurstSize = BufferSize&gt;
<span class="keyword">class</span> <span class="identifier">burst_write_buffer</span> <a class="anchor" href="#data-buffer-burst_write-burst_write_buffer" id="data-buffer-burst_write-burst_write_buffer">§</a><a class="source_link" href="https://github.com/microsoft/kanagawa/blob/e41314736d50703cb9303af1fc3038c1c48b8ab4/library/data/buffer/burst_write.k#L20">source</a>
</pre>
<div class="docs">
<p>Buffer that accumulates a given number of entries, and then invokes a
callback one or more times to write those values to e.g. DRAM in a
burst.</p>
<details>
<p><summary>Parameters</summary></p>
<div>
<ul class="subList">
<li>
<pre class="signature">
<span class="keyword">typename</span> T
</pre>
<div class="docs">
<p>Type of each entry of the buffer</p>
</div>
</li>
<li>
<pre class="signature">
<span class="keyword">auto</span> BufferSize
</pre>
<div class="docs">
<p>Number of elements to buffer. Must be a power of 2.</p>
</div>
</li>
<li>
<pre class="signature">
<span class="keyword">auto</span> BurstSize = BufferSize
</pre>
<div class="docs">
<p>Number of elements to store before invoking the
<code>write_callbck</code>. Must be a power of 2 and
<code>BurstSize</code> &lt;= <code>BufferSize</code>.</p>
</div>
</li>
</ul>
</div>
</details>
<details>
<p><summary>Aliases</summary></p>
<div>
<ul class="subList">
<li>
<pre class="signature">
<span class="keyword">using</span> <span class="identifier">buffer_count_t</span> = <a class="link" href="../../type/stdtype.html#type-stdtype-count_t"><span class="identifier">count_t</span></a>&lt;BufferSize&gt; <a class="anchor" href="#data-buffer-burst_write-burst_write_buffer-buffer_count_t" id="data-buffer-burst_write-burst_write_buffer-buffer_count_t">§</a><a class="source_link" href="https://github.com/microsoft/kanagawa/blob/e41314736d50703cb9303af1fc3038c1c48b8ab4/library/data/buffer/burst_write.k#L27">source</a>
</pre>
</li>
<li>
<pre class="signature">
<span class="keyword">using</span> <span class="identifier">burst_count_t</span> = <a class="link" href="../../type/stdtype.html#type-stdtype-count_t"><span class="identifier">count_t</span></a>&lt;BurstSize&gt; <a class="anchor" href="#data-buffer-burst_write-burst_write_buffer-burst_count_t" id="data-buffer-burst_write-burst_write_buffer-burst_count_t">§</a><a class="source_link" href="https://github.com/microsoft/kanagawa/blob/e41314736d50703cb9303af1fc3038c1c48b8ab4/library/data/buffer/burst_write.k#L28">source</a>
</pre>
</li>
</ul>
</div>
</details>
<details>
<p><summary>Methods</summary></p>
<div>
<ul class="subList">
<li>
<pre class="signature">
<span class="modifier">inline </span><a class="link" href="../../data/buffer/burst_write.html#data-buffer-burst_write-burst_write_buffer"><span class="identifier">burst_write_buffer</span></a>::<a class="link" href="../../data/buffer/burst_write.html#data-buffer-burst_write-burst_write_buffer-buffer_count_t"><span class="identifier">buffer_count_t</span></a> <span class="identifier">count</span>() <a class="anchor" href="#data-buffer-burst_write-burst_write_buffer-count" id="data-buffer-burst_write-burst_write_buffer-count">§</a><a class="source_link" href="https://github.com/microsoft/kanagawa/blob/e41314736d50703cb9303af1fc3038c1c48b8ab4/library/data/buffer/burst_write.k#L66">source</a>
</pre>
<div class="docs">
<p>Return the number of elements that have been written and not yet sent
to the callback. Note that this can be out of date the instant it is
read due to other threads writing to the buffer.</p>
</div>
</li>
<li>
<pre class="signature">
<span class="modifier">inline </span>
<span class="keyword">void</span>
<span class="identifier">write</span>(
    T <span class="identifier">value</span>,
    <span class="builtin">bool</span> <span class="identifier">flush_now</span>,
    ( T <span class="identifier">value</span>, <a class="link" href="../../data/buffer/burst_write.html#data-buffer-burst_write-burst_write_buffer"><span class="identifier">burst_write_buffer</span></a>::<a class="link" href="../../data/buffer/burst_write.html#data-buffer-burst_write-burst_write_buffer-burst_count_t"><span class="identifier">burst_count_t</span></a> <span class="identifier">index</span>, <span class="builtin">bool</span> <span class="identifier">is_last</span>
    ) -&gt; <span class="keyword">void</span> <span class="identifier">write_callback</span>
    ) <a class="anchor" href="#data-buffer-burst_write-burst_write_buffer-write" id="data-buffer-burst_write-burst_write_buffer-write">§</a><a class="source_link" href="https://github.com/microsoft/kanagawa/blob/e41314736d50703cb9303af1fc3038c1c48b8ab4/library/data/buffer/burst_write.k#L78">source</a>
</pre>
<div class="docs">
<p>Write one entry to the buffer. May invoke the
<code>write_callback</code> function.</p>
<details>
<p><summary>Arguments</summary></p>
<div>
<ul class="subList">
<li>
<pre class="signature">
T <span class="identifier">value</span>
</pre>
<div class="docs">
<p>The value to write.</p>
</div>
</li>
<li>
<pre class="signature">
<span class="builtin">bool</span> <span class="identifier">flush_now</span>
</pre>
<div class="docs">
<p>If true, the callback will be invoked for any buffered values, even
if there are fewer than <code>BurstSize</code> values buffered.</p>
</div>
</li>
<li>
<pre class="signature">
( T <span class="identifier">value</span>, <a class="link" href="../../data/buffer/burst_write.html#data-buffer-burst_write-burst_write_buffer"><span class="identifier">burst_write_buffer</span></a>::<a class="link" href="../../data/buffer/burst_write.html#data-buffer-burst_write-burst_write_buffer-burst_count_t"><span class="identifier">burst_count_t</span></a> <span class="identifier">index</span>, <span class="builtin">bool</span> <span class="identifier">is_last</span>
) -&gt; <span class="keyword">void</span> <span class="identifier">write_callback</span>
</pre>
<div class="docs">
<p>The function to call when <code>BurstSize</code> entires have been
written.</p>
<details>
<p><summary>Arguments</summary></p>
<div>
<ul class="subList">
<li>
<pre class="signature">
T <span class="identifier">value</span>
</pre>
<div class="docs">
<p>The value to write in the callback.</p>
</div>
</li>
<li>
<pre class="signature">
<a class="link" href="../../data/buffer/burst_write.html#data-buffer-burst_write-burst_write_buffer"><span class="identifier">burst_write_buffer</span></a>::<a class="link" href="../../data/buffer/burst_write.html#data-buffer-burst_write-burst_write_buffer-burst_count_t"><span class="identifier">burst_count_t</span></a> <span class="identifier">index</span>
</pre>
<div class="docs">
<p>The index of this callback within the burst. Between 0 and
<code>BurstSize</code> - 1 inclusive.</p>
</div>
</li>
<li>
<pre class="signature">
<span class="builtin">bool</span> <span class="identifier">is_last</span>
</pre>
<div class="docs">
<p>True if this is the last value within this burst, false
otherwise.</p>
</div>
</li>
</ul>
</div>
</details>
</div>
</li>
</ul>
</div>
</details>
</div>
</li>
</ul>
</div>
</details>
<details>
<p><summary>Invariants</summary></p>
<div>
<ul class="subList">
<li>
<pre class="signature">
(<span class="literal">0</span> == (BufferSize &amp; (BufferSize - <span class="literal">1</span>)))
</pre>
<div class="docs">
<p><code>BufferSize</code> must be a power of 2.</p>
</div>
</li>
<li>
<pre class="signature">
(<span class="literal">0</span> == (BurstSize &amp; (BurstSize - <span class="literal">1</span>)))
</pre>
<div class="docs">
<p><code>BurstSize</code> must be a power of 2.</p>
</div>
</li>
<li>
<pre class="signature">
(BurstSize &lt;= BufferSize)
</pre>
</li>
</ul>
</div>
</details>
</div>
</section>
</div>
</div>